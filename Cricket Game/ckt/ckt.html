<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Cricket Game - Again</title>
    <style>
        /* Basic styling for the body and buttons */
        .body {
            text-align: center;
        }

        /* Styling for buttons */
        button {
            cursor: pointer;
            border: solid 2px #000;
            background-color: transparent;
            border-radius: 5px;
        }
        .image {
            height: 50px;
        }

    </style>
</head>

<body>
    <h1>Cricket Game - Again</h1>
    <button id="Choose Bat" onclick="batButton()"><img src="/Images/Icons/cricket-bat.gif" class="image" alt="cricket-bat"></button>
    <button id="Choose Ball" onclick="ballButton()"><img src="/Images/Icons/cricket-ball.gif" class="image" alt="cricket-ball"></button>
    <button id="Choose Stumps" onclick="stumpsButton()"><img src="/Images/Icons/wicket.gif" class="image" alt="cricket-stumps"></button>
    <button onclick="resetScore()"><img src="/Images/Icons/reset.gif" class="image" alt="reset"></button>
    <h2 id="user-move"></h2>
    <h2 id="computer-move"></h2>
    <h2 id="result-message"></h2>
    <h2 id="score-display"></h2>
</body>
<script>
    // Retrieve score from local storage or initialize if not present
    let scoreString = localStorage.getItem('score');
    // Parse the score or set default values if null 
    let score = JSON.parse(scoreString) || {
        win: 0,
        loss: 0,
        tie: 0,
    };

    // Function to display current score
    score.displayScore = function () {
        return `Wins: ${this.win}, Losses: ${this.loss}, Ties: ${this.tie}`;
    }
    // Function for Bat button
    function batButton() {
        let computerChoice = GenerateRandomNum();
        let resultMsg = WhoWin("Bat", computerChoice);
        showwhowin("Bat", computerChoice, resultMsg);
    }
    // Function to generate computer's random choice
    function GenerateRandomNum() {
        let computerChoice = "";
        let randomNum = Math.random() * 3;
        randomNum = Math.floor(randomNum);
        if (randomNum === 0) {
            computerChoice = "Bat";
        } else if (randomNum === 1) {
            computerChoice = "Ball";
        } else {
            computerChoice = "Stumps";
        }
        return computerChoice;
    }

    // Function to determine the winner
    function WhoWin(userChoice, computerChoice) {
        if (userChoice === computerChoice) {
            score.tie++;
            return "It's a Tie!";
        } else if (
            (userChoice === "Bat" && computerChoice === "Ball") ||
            (userChoice === "Ball" && computerChoice === "Stumps") ||
            (userChoice === "Stumps" && computerChoice === "Bat")
        ) {
            score.win++;
            return "You Win!";
        } else {
            score.loss++;
            return "You Lose!";
        }
    }

    // Function for Ball button
    function ballButton() {
        let computerChoice = GenerateRandomNum();
        let resultMsg = WhoWin("Ball", computerChoice);
        showwhowin("Ball", computerChoice, resultMsg);
    }

    // Function for Stumps button
    function stumpsButton() {
        let computerChoice = GenerateRandomNum();
        let resultMsg = WhoWin("Stumps", computerChoice);
        showwhowin("Stumps", computerChoice, resultMsg);
    }

    // Function to display the result
    function showwhowin(userChoice, computerChoice, resultMsg) {
        // Save score to local storage
        localStorage.setItem('score', JSON.stringify(score));
        document.querySelector('#user-move').innerText = `You chose: ${userChoice}`;
        document.querySelector('#computer-move').innerText = `Computer chose: ${computerChoice}`;
        document.querySelector('#result-message').innerText = resultMsg;
        document.querySelector('#score-display').innerText = score.displayScore();
        // // Display result message
        // alert(`You chose ${userChoice}.\nComputer chose ${computerChoice}.\n${resultMsg}
        //  \n\n${score.displayScore()}`);
    }

    // Function to reset the score
    function resetScore() {
        score.win = 0;
        score.loss = 0;
        score.tie = 0;
        localStorage.setItem('score', JSON.stringify(score));
        showwhowin("", "", "Score has been reset!");
    }
</script>

</html>