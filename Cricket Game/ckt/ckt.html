<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Cricket Game - Again</title>
    <style>
        /* Basic styling for the body and buttons */
        .body {

            font-family: Arial, sans-serif;
            text-align: center;
        }

        /* Styling for buttons */
        button {

            margin: 10px;
            padding: 10px 20px;
            font-size: 16px;
        }

    </style>
</head>

<body>
    <h1>Cricket Game - Again</h1>
    <button id="Choose Bat" onclick="batButton()">Choose Bat</button>
    <button id="Choose Ball" onclick="ballButton()">Choose Ball</button>
    <button id="Choose Stumps" onclick="stumpsButton()">Choose Stumps</button>
    <button onclick="resetScore()">Reset Score</button>
</body>
<script>
    // Retrieve score from local storage or initialize if not present
    let scoreString = localStorage.getItem('score');
    // Parse the score or set default values if null 
    let score = JSON.parse(scoreString) || {
        win: 0,
        loss: 0,
        tie: 0,
    };

    // Function to display current score
    score.displayScore = function () {
        return `Wins: ${this.win}, Losses: ${this.loss}, Ties: ${this.tie}`;
    }
    // Function for Bat button
    function batButton() {
        let computerChoice = GenerateRandomNum();
        let resultMsg = WhoWin("Bat", computerChoice);
        showwhowin("Bat", computerChoice, resultMsg);
    }
    // Function to generate computer's random choice
    function GenerateRandomNum() {
        let computerChoice = "";
        let randomNum = Math.random() * 3;
        randomNum = Math.floor(randomNum);
        if (randomNum === 0) {
            computerChoice = "Bat";
        } else if (randomNum === 1) {
            computerChoice = "Ball";
        } else {
            computerChoice = "Stumps";
        }
        return computerChoice;
    }

    // Function to determine the winner
    function WhoWin(userChoice, computerChoice) {
        if (userChoice === computerChoice) {
            score.tie++;
            return "It's a Tie!";
        } else if (
            (userChoice === "Bat" && computerChoice === "Ball") ||
            (userChoice === "Ball" && computerChoice === "Stumps") ||
            (userChoice === "Stumps" && computerChoice === "Bat")
        ) {
            score.win++;
            return "You Win!";
        } else {
            score.loss++;
            return "You Lose!";
        }
    }

    // Function for Ball button
    function ballButton() {
        let computerChoice = GenerateRandomNum();
        let resultMsg = WhoWin("Ball", computerChoice);
        showwhowin("Ball", computerChoice, resultMsg);
    }

    // Function for Stumps button
    function stumpsButton() {
        let computerChoice = GenerateRandomNum();
        let resultMsg = WhoWin("Stumps", computerChoice);
        showwhowin("Stumps", computerChoice, resultMsg);
    }

    // Function to display the result
    function showwhowin(userChoice, computerChoice, resultMsg) {
        // Save score to local storage
        localStorage.setItem('score', JSON.stringify(score));
        // Display result message
        alert(`You chose ${userChoice}.\nComputer chose ${computerChoice}.\n${resultMsg}
         \n\n${score.displayScore()}`);
    }

    // Function to reset the score
    function resetScore() {
        score.win = 0;
        score.loss = 0;
        score.tie = 0;
        localStorage.setItem('score', JSON.stringify(score));
        alert("Score has been reset.\n\n" + score.displayScore());
    }
</script>

</html>